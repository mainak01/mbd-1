all: build

fbuild:
	@$(MAKE) -C {BLDDIR}

build: fbuild
	{PYTHON} setup.py --quiet build

devel: fbuild
	{PYTHON} -m pip install -e .

test: fbuild
	{PYTHON} setup.py --quiet build_ext --inplace
	@cd tests && PYTHONPATH=$$PYTHONPATH:.. {PYTHON} tests.py

install: fbuild
	{PYTHON} -m pip install .

clean:
	@$(MAKE) -C {BLDDIR} clean
	{PYTHON} setup.py --quiet clean

distclean: clean
	rm -rf {BLDDIR}
	rm -f $(wildcard Makefile setup.cfg *.so *.dylib)
	-rmdir egg

Makefile: Makefile.in build.mk configure
	@./config.status
	@echo Reconfigured MBD.
